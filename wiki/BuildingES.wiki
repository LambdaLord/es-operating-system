#summary How to build the ES operating system for x86 PC.
#labels Build-ES

= Building the ES operating system for x86 PC =

Once your [DeveloperSetup development environment] and [BuildingSupportLibraries support libraries] are set up correctly, you can build the ES operating system for x86 PC.

In the following steps, we will use the ES cross libraries in '/opt/es'. If you have set up them in the other place, please modify you --prefix and other options accordingly.

{{{
$ mkdir pc
$ cd pc
$ CFLAGS=-g CXXFLAGS=-g ../es-operating-system/configure --prefix=/opt/es --host=i386-pc-es --target=i386-pc-es
$ make
}}}

To generate a disk image that can be used with qemu, execute the script named `es` in the `pc/init` directory.

{{{
$ cd pc/init
$ ./es
}}}

The resulting file, named `fat32.img`, is a bootable ES operating system disk image. To boot the ES operating system on qemu:

{{{
$ qemu -hda fat32.img -serial stdio -soundhw sb16
}}}

----

*Note*: Depends on the operating systems and/or the qemu versions, you may need to specify dummy CD ROM image by specifying `-cdrom dummy.iso` option to qemu.

*Note*: If you are using Ubuntu 7.10, please add the `-net none` option to run ES on QEMU as below:

{{{
$ qemu -hda fat32.img -serial stdio -soundhw sb16 -net none
}}}

QEMU 0.9.0 comes with Ubuntu 7.10 seems to have a problem with the RTL8029AS Ethernet controller emulation.

