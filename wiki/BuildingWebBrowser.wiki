#summary How to build ES web browser for Linux

= Building ES web browser for Linux =

*Note*: An easy ES web browser setup script for Fedora 15 and Ubuntu 11.04 is available [http://es-operating-system.googlecode.com/svn/trunk/setup.www here]. ES web browser has been tested on [http://fedoraproject.org/ Fedora] 15 (x86, x86-64) and [http://www.ubuntu.com/ Ubuntu] 11.04 (x86) at this point.

*Prerequisites on Fedora*:
{{{
$ sudo yum install gcc gcc-c++ subversion autoconf automake libtool texinfo bison flex js-devel re2c libicu-devel \
freetype-devel freeglut-devel libpng-devel libjpeg-devel boost-devel boost-iostreams boost-system boost-regex
}}}

*Prerequisites on Ubuntu*:
{{{
$ sudo apt-get install subversion autoconf automake libtool texinfo bison flex libmozjs-dev re2c libicu-dev \
libfreetype6-dev freeglut3-dev libpng-dev libjpeg-dev libboost-dev libboost-iostreams-dev libboost-system-dev libboost-regex-dev
}}}

For the !JavaScript engine, we're using [https://developer.mozilla.org/en/SpiderMonkey SpiderMonkey] 1.8.5 instead of our own classic esjs.

----

Before start building, please make sure you have built and installed the latest esidl Web IDL compiler
following the [QuickSetup instruction] from the subversion repository.

To build ES web browser, check out the source code, and set up the configure script by doing the following steps:

{{{
$ svn checkout http://es-operating-system.googlecode.com/svn/trunk/www
$ cd www
$ aclocall --force
$ autoconf -f
$ autoheader -f
$ automake -a -c --foreign -f
}}}

Then build the web browser:

{{{
$ configure CXXFLAGS=-g CFLAGS=-g
$ make
}}}

The browser core executable is currently built as `Script.test`. 
For testing, we recommend you to run a HTTP server locally on your PC with `www/testdata` directory at the root.
Running the following command in `www/testdata` would be sufficient:

{{{
$ python -m SimpleHTTPServer
}}}

Then execute `Script.test` as below:

{{{
./ScriptTest [path to 'testdata']/default.css http://localhost:8000/browser.html
}}}

`Script.test` takes two command line arguments: 
the 1st one is the default CSS style sheet, 
and the 2nd one is the initial URL to open.
As we are going to build the browser UI in HTML, 
the 2nd argument in the above command line points to a tiny browser web application.
If a new window successfully comes up, 
type `http://localhost:8000/1.html` in the top most text box and hit the Enter key
(note currently a caret is not shown, but backspace, delete, home, end, left, and right arrow keys are functioning). 
If everything is fine, you'll see the screens like below:

http://es-operating-system.googlecode.com/svn/html/Browser/screenshot1.png

Please take a look into [http://code.google.com/p/es-operating-system/source/browse/trunk/www/testdata www/testdata]
to see what else you can test now.

http://es-operating-system.googlecode.com/svn/html/Browser/screenshot2.png

Since the current version only implements a few very critical paths for a web browser, 
please do not expect you can visits and see many other sites.

Here's a quick introduction about  
[http://code.google.com/p/es-operating-system/source/browse/trunk/www the current browser source tree]:

  * www - A DOM core and events implementation.
    ** css - A CSS parser and renderer implementation using OpenGL as a graphics back-end.
    ** font - A tiny font manager that converts !TrueType fonts to OpenGL textures.
    ** html - An implementation of the HTML5 parser and HTML interfaces and elements. 
    ** http - HTTP 1.1 client built on top of [http://www.boost.org/doc/libs/1_46_1/doc/html/boost_asio.html boost asio library]. 
    ** idl - Web IDL definitions customized for the current esidl.
    ** js - JSAPI bridge for using !SpiderMonkey.
    ** testdata - test data files.
    ** url - URL parser

----
*Change history*

Brief descriptions of ok revisions.
  * [http://code.google.com/p/es-operating-system/source/detail?r=1846 r1846] Support more CSS 2.1 properties, and the 'load' and 'click' DOM events. A more detailed description is given [http://shiki.esrille.com/2011/07/es731.html here] with screenshots (in Japanese). 
  * [http://code.google.com/p/es-operating-system/source/detail?r=1815 r1815] Support more CSS 2.1 properties and bug fixes. A more detailed description is given [http://shiki.esrille.com/2011/07/es721.html here] with  screenshots (in Japanese).
  * [http://code.google.com/p/es-operating-system/source/detail?r=1802 r1802] Implement a simplified shrink-to-fit calculation. The example in CSS 2.1 [http://www.w3.org/TR/CSS21/visuren.html#float-position "9.5.1 Positioning the float: the 'float' property"] is now rendered as expected.
  * [http://code.google.com/p/es-operating-system/source/detail?r=1798 r1798] Fix SEGV due to HTTP notifications sent to deleted CSS boxes.
  * [http://code.google.com/p/es-operating-system/source/detail?r=1794 r1794] Support CSS 2.1 border styles.
  * [http://code.google.com/p/es-operating-system/source/detail?r=1793 r1793] Support JPEG image.
  * [http://code.google.com/p/es-operating-system/source/detail?r=1783 r1783] Support x86-64 (only tested on Fedora 15).
  * [http://code.google.com/p/es-operating-system/source/detail?r=1777 r1777] esidl has almost switched over to Web IDL W3C Editorâ€™s Draft 4 July 2011 specification, and ES web browser is built from the IDL definitions in the very recent DOM Core and HTML specifications.
  * [http://code.google.com/p/es-operating-system/source/detail?r=1759 r1759] Support Ubuntu 11.04.
  * [http://code.google.com/p/es-operating-system/source/detail?r=1753 r1753] The initial open source edition. Tested only on Fedora 15.